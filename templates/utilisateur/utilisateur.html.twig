{% extends 'base.html.twig' %}

{% block title %}Liste des Utilisateurs{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('css/utilisateur.css') }}">
{% endblock %}

{% block body %}
<div class="container mt-5">
    <h2 class="text-center">Liste des utilisateurs</h2>

    <!-- Add User Button -->
    <button class="btn btn-primary mb-3">Ajouter un utilisateur</button>

    <table class="table table-striped table-bordered">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>Prénom</th>
                <th>Email</th>
                <th>Mobile</th>
                <th>Désignation</th>
                <th>Équipements</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in utilisateurs %}
                <tr>
                    <td>{{ user.idU }}</td>
                    <td>{{ user.nom }}</td>
                    <td>{{ user.pren }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.mobile }}</td>
                    <td>
                        {% if user.designation %}
                            {{ user.designation.libelle }}
                        {% else %}
                            <span class="text-muted">Non assigné</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if user.equipements is not empty %}
                            <ul class="list-unstyled">
                                {% for equipement in user.equipements %}
                                    <li>
                                        <p><strong>ID:</strong> {{ equipement.id_eq }}</p>

                                        <p><strong>Désignation:</strong> {{ equipement.designation }}</p>

                                        <p><strong>Modèle:</strong> {{ equipement.modele }}</p>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <p>Aucun équipement</p>
                        {% endif %}
                    </td>
                    
                    <td>
                        <button class="btn btn-warning btn-sm me-2">Modifier</button>
                        <button class="btn btn-danger btn-sm">Supprimer</button>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <p class="text-center text-danger" {% if utilisateurs is not empty %} style="display:none;" {% endif %}>Aucun utilisateur trouvé.</p>
</div>
{% endblock %}